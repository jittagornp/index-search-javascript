<html>
    <head>
        <style>
            .highlighter{
                color : red;
            }

            .level-0 > a{
                font-weight: bold; 
            }
        </style>
    </head>
    <body>
        <script src="jQuery.js"></script>
        <script src="repository.js"></script>
        <script src="indexsearch.js"></script>
        <script>
            (function($, indexSearch) {
                console.log(indexSearch.getIndexs());
                $(function() {
                    var inputSearch = $('#inputSearch');
                    var resultSearch = $('#resultSearch');

                    showResult(repository);
                    inputSearch.keyup(function() {
                        var keyword = inputSearch.val();
                        var resultSearch = indexSearch.search(keyword);
                        console.log(indexSearch.getKeyword() + ' : total => ' + resultSearch.getTotalHighlight());
                        showResult(resultSearch.getContent());
                    });

                    function showResult(result) {
                        var ul = $('<ul>');
                        resultSearch.html(ul);
                        walkTreeShowResult(result, ul);
                    }

                    function walkTreeShowResult(parent, parentDOM) {
                        var posts = parent.posts;
                        if (!posts || posts.length === 0) {
                            return;
                        }

                        for (var index in posts) {
                            var child = posts[index];
                            var link = $('<a>').attr('href', child.link).html(child.highlight || child.name);
                            var childDOM = $('<ol>');
                            var li = $('<li>').attr('class', child.level).append(link).append(childDOM);
                            parentDOM.append(li);

                            walkTreeShowResult(child, childDOM);
                        }
                    }
                });
            })(jQuery, new IndexSearch(repository));
        </script>

        <input id="inputSearch"/>
        <div id="resultSearch"></div>
    </body>
</html>