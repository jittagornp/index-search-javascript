<html>
    <head>
        <style>
            .highlighter{
                color : red;
            }

            .level-0 > a{
                font-weight: bold; 
            }
        </style>
    </head>
    <body>
        <script src="jQuery.js"></script>
        <script src="repository.js"></script>
        <script src="indexsearch.js"></script>
        <script>
            (function($, indexSearch) {
                console.log(indexSearch.getIndexs());
                $(function() {
                    var inputSearch = $('#inputSearch');
                    var resultSearch = $('#resultSearch');

                    showResult(repository);
                    inputSearch.keyup(function() {
                        var keyword = inputSearch.val();
                        var result = indexSearch.search(keyword);
                        console.log(indexSearch.getKeyword() + ' : total => ' + result.getTotalHighlight());
                        showResult(result.getContent());
                    });

                    function showResult(result) {
                        var ul = $('<ul>');
                        resultSearch.html(ul);
                        walkTreeShowResult(result, ul);
                    }

                    function walkTreeShowResult(repository, parentDOM) {
                        var repositories = repository.repositories;
                        if (!repositories || repositories.length === 0) {
                            return;
                        }

                        for (var index in repositories) {
                            var repo = repositories[index];
                            var link = $('<a>').attr('href', repo.link).html(repo.nameHighlight || repo.name);
                            var childDOM = $('<ol>');
                            var li = $('<li>').attr('class', repo.level).append(link).append(childDOM);
                            parentDOM.append(li);

                            walkTreeShowResult(repo, childDOM);
                        }
                    }
                });
            })(jQuery, new IndexSearch(repository, {
                maximumIndexKeySize : 5,
                indexOnFields : ['name']        
            }));
        </script>

        <input id="inputSearch"/>
        <div id="resultSearch"></div>
    </body>
</html>